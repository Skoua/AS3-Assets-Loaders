package ar.net{	import flash.net.URLRequest;	import flash.net.URLLoader;	import flash.events.IOErrorEvent;	import flash.events.Event;	import flash.events.EventDispatcher;	import ar.events.XMLLoaderEvent;		public class XMLLoader extends EventDispatcher	{		private var loader:URLLoader;		private var url:String;		private var xml:XML;				public function XMLLoader():void		{			loader = new URLLoader();		}				public function load(pURL:String):void		{			url = pURL;						loader.addEventListener(IOErrorEvent.IO_ERROR, onError);			loader.addEventListener(Event.COMPLETE, onComplete);			loader.load(new URLRequest(url));		}				private function onError(e:IOErrorEvent):void		{			throw new Error("Can't find XML file: " + url);		}				private function onComplete(e:Event):void		{			e.target.removeEventListener(IOErrorEvent.IO_ERROR, onError);			e.target.removeEventListener(Event.COMPLETE, onComplete);						xml = XML(e.target.data);			loader = null;						dispatchEvent(new XMLLoaderEvent(XMLLoaderEvent.COMPLETE));		}				public function get data():XML		{			return xml;		}	}}